<div class="flex flex-col w-full h-full items-center justify-center px-4">
  <div class="text-center mb-8">
    <h1 class="text-3xl font-bold text-white flex items-center justify-center">
      <span class="text-indigo-400 mr-2">Ani</span>
      <span>Connect</span>
    </h1>
    <p class="text-zinc-400 mt-2 text-sm">Your anime & manga community</p>
  </div>

  <div class="bg-zinc-800/70 rounded-lg p-6 shadow-xl w-full max-w-sm sm:min-w-96">
    <h2 class="text-xl font-semibold text-white mb-6">Entrar em sua conta</h2>

    @if (errorMessage()) {
      <div class="mb-4 p-3 rounded-lg bg-red-600/30 border border-red-700 text-red-200 text-sm text-center">
        {{ errorMessage() }}
      </div>
    }

    <form class="flex flex-col gap-7" (submit)="submit()" [formGroup]="loginForm">

      <div class="relative">
        <input
          formControlName="username"
          type="email"
          class="w-full bg-zinc-800/50 border border-zinc-700 rounded-xl px-4 py-3 text-white placeholder-transparent focus:outline-none focus:ring-2 focus:ring-indigo-500/50 focus:border-transparent peer pt-5"
          placeholder="Email"
        />
        <label
          class="absolute select-none text-xs text-zinc-500 left-4 top-1 peer-placeholder-shown:top-5 peer-placeholder-shown:text-zinc-500 peer-placeholder-shown:text-sm peer-focus:top-1 peer-focus:text-xs peer-focus:text-indigo-400 transition-all"
        >
          Email/Nome
        </label>

        @if (username.invalid && (username.dirty || username.touched)) {
          <div class="text-red-400 text-sm mt-2 ml-1">
            @if (username.errors?.['required']) {
              <div>O campo é obrigatório.</div>
            }
            @if (username.errors?.['minlength']) {
              <div>Mínimo de 4 caracteres.</div>
            }
          </div>
        }
      </div>

      <div class="relative">
        <input
          formControlName="password"
          [type]="viewPassword() ? 'text' : 'password'"
          class="w-full pr-14 bg-zinc-800/50 border border-zinc-700 rounded-xl px-4 py-3 text-white placeholder-transparent focus:outline-none focus:ring-2 focus:ring-indigo-500/50 focus:border-transparent peer pt-5"
          placeholder="Password"
        />
        <label
          class="absolute select-none text-xs text-zinc-500 left-4 top-1 peer-placeholder-shown:top-5 peer-placeholder-shown:text-zinc-500 peer-placeholder-shown:text-sm peer-focus:top-1 peer-focus:text-xs peer-focus:text-indigo-400 transition-all"
        >
          Senha
        </label>
        <div
          class="absolute top-5 right-4 cursor-pointer"
          (click)="viewPassword.set(!viewPassword())"
        >
          <i-lucide [size]="20" [img]="viewPassword() ? EyeOff : Eye"></i-lucide>
        </div>

        @if (password.invalid && (password.dirty || password.touched)) {
          <div class="text-red-400 text-sm mt-2 ml-1">
            @if (password.errors?.['required']) {
              <div>A senha é obrigatória.</div>
            }
            @if (password.errors?.['minlength']) {
              <div>Mínimo de 8 caracteres.</div>
            }
          </div>
        }
      </div>

      <div class="flex justify-between items-center text-sm flex-wrap gap-2">
        <label class="flex items-center gap-2 text-zinc-400">
          <input
            formControlName="rememberMe"
            type="checkbox"
            class="h-4 w-4 rounded border-zinc-700 bg-zinc-800 text-indigo-500 focus:ring-indigo-500/50"
          />
          Lembre-se de mim
        </label>
        <a class="text-indigo-400 hover:text-indigo-300 hover:underline">
          Esqueceu a senha?
        </a>
      </div>

      <!-- Botão de envio -->
      <button

        type="submit"
        class="not-active w-full bg-indigo-600 text-white rounded-xl py-3 font-medium hover:bg-indigo-700 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"
      >
        Entrar
      </button>
    </form>

    <!-- Link para registro -->
    <p class="mt-6 text-center text-sm text-zinc-500">
      Ainda não tem conta?
      <a
        routerLink="/register"
        class="text-indigo-400 hover:text-indigo-300 hover:underline"
        >Registrar</a
      >
    </p>
  </div>
</div>
