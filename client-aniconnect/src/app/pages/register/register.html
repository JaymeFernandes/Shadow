<div class="flex flex-col w-full h-full items-center justify-center px-4">
  <div class="text-center mb-8">
    <h1 class="text-3xl font-bold text-white flex items-center justify-center">
      <span class="text-indigo-400 mr-2">Ani</span>
      <span>Connect</span>
    </h1>
    <p class="text-zinc-400 mt-2 text-sm">Your anime & manga community</p>
  </div>

  <div class="bg-zinc-800/70 rounded-lg p-6 shadow-xl w-full max-w-sm sm:min-w-96">
    <h2 class="text-xl font-semibold text-white mb-6">Criar uma conta</h2>

    @if (errorMessage()) {
      <div class="mb-4 p-3 rounded-lg bg-red-600/30 border border-red-700 text-red-200 text-sm text-center">
        {{ errorMessage() }}
      </div>
    }

    <form class="flex flex-col gap-7" (submit)="submit()" [formGroup]="registerForm">
      <div class="relative">
        <input formControlName="username" type="text" class="w-full bg-zinc-800/50 border border-zinc-700 rounded-xl px-4 py-3 text-white placeholder-transparent focus:outline-none focus:ring-2 focus:ring-indigo-500/50 focus:border-transparent peer pt-5" placeholder="Nome completo">
        <label class="absolute select-none text-xs text-zinc-500 left-4 top-1 peer-placeholder-shown:top-5 peer-placeholder-shown:text-zinc-500 peer-placeholder-shown:text-sm peer-focus:top-1 peer-focus:text-xs peer-focus:text-indigo-400 transition-all">
          Nome
        </label>

        @if(username?.invalid && (username?.dirty || username?.touched)) {
          <div class="text-red-400 text-sm mt-2 ml-1">
            @if (username.errors?.['required']) {
              <div>O campo é obrigatório.</div>
            }
            @if (username.errors?.['minlength']) {
              <div>Mínimo de 4 caracteres.</div>
            }
          </div>
        }
      </div>


      <div class="relative">
        <input formControlName="email" type="email" class="w-full bg-zinc-800/50 border border-zinc-700 rounded-xl px-4 py-3 text-white placeholder-transparent focus:outline-none focus:ring-2 focus:ring-indigo-500/50 focus:border-transparent peer pt-5" placeholder="Email">
        <label  class="absolute select-none text-xs text-zinc-500 left-4 top-1 peer-placeholder-shown:top-5 peer-placeholder-shown:text-zinc-500 peer-placeholder-shown:text-sm peer-focus:top-1 peer-focus:text-xs peer-focus:text-indigo-400 transition-all">
          Email
        </label>

        @if(email?.invalid && (email?.dirty || email?.touched)) {
          <div class="text-red-400 text-sm mt-2 ml-1">
            @if (username.errors?.['required']) {
              <div>O campo é obrigatório.</div>
            }
            @if(email.errors?.['email']){
              <div>O campo deve ser um email valido</div>
            }
          </div>
        }



      </div>

      <div class="relative">
        <input formControlName="password" [type]="viewPassword() ? 'text' : 'password'" class="w-full pr-14 bg-zinc-800/50 border border-zinc-700 rounded-xl px-4 py-3 text-white placeholder-transparent focus:outline-none focus:ring-2 focus:ring-indigo-500/50 focus:border-transparent peer pt-5" placeholder="Senha">
        <label class="absolute select-none text-xs text-zinc-500 left-4 top-1 peer-placeholder-shown:top-5 peer-placeholder-shown:text-zinc-500 peer-placeholder-shown:text-sm peer-focus:top-1 peer-focus:text-xs peer-focus:text-indigo-400 transition-all">
          Senha
        </label>
        <div class="absolute top-5 right-4" (click)="viewPassword.set(!viewPassword())">
          <i-lucide [size]="20" [img]="viewPassword() ? EyeOff : Eye"></i-lucide>
        </div>

        @if (password?.invalid && (password?.dirty || password?.touched)) {
          <div class="text-red-400 text-sm mt-2 ml-1">
            @if (password.errors?.['required']) {
              <div>O campo é obrigatório.</div>
            }
            @else if(!password.errors?.["maxlength"]) {
              <div>Senha está insegura</div>
            }
            @else {
              <div>Senha maior que o permitido</div>
            }
          </div>
        }

      </div>

      <!-- Confirmar senha -->
      <div class="relative">
        <input formControlName="confirmPassword" [type]="viewPassword() ? 'text' : 'password'" class="w-full pr-14 bg-zinc-800/50 border border-zinc-700 rounded-xl px-4 py-3 text-white placeholder-transparent focus:outline-none focus:ring-2 focus:ring-indigo-500/50 focus:border-transparent peer pt-5" placeholder="Confirmar senha">
        <label class="absolute select-none text-xs text-zinc-500 left-4 top-1 peer-placeholder-shown:top-5 peer-placeholder-shown:text-zinc-500 peer-placeholder-shown:text-sm peer-focus:top-1 peer-focus:text-xs peer-focus:text-indigo-400 transition-all">
          Confirmar senha
        </label>

        @if(confirmPassword?.valid && (confirmPassword?.dirty || confirmPassword?.touched)) {
          <div class="text-red-400 text-sm mt-2 ml-1">
            @if(confirmPassword.errors?.['required']) {
              <div>O campo é obrigatório.</div>
            }
            @else {
              <div>As duas senhas devem ser iguais</div>
            }
          </div>
        }
      </div>

      <button type="submit" class="w-full bg-indigo-600 text-white rounded-xl py-3 font-medium hover:bg-indigo-700 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500">Registrar</button>
    </form>

    <p class="mt-6 text-center text-sm text-zinc-500">
      Já tem uma conta?
      <a routerLink="/login" class="text-indigo-400 hover:text-indigo-300 hover:underline">Entrar</a>
    </p>
  </div>
</div>
